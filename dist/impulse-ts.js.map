{"version":3,"file":"impulse-ts.js","mappings":"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","sources":["webpack://impulse-ts/./build/Debug/impulseTsToolkit.node","webpack://impulse-ts/external \"path\"","webpack://impulse-ts/webpack/bootstrap","webpack://impulse-ts/webpack/runtime/define property getters","webpack://impulse-ts/webpack/runtime/hasOwnProperty shorthand","webpack://impulse-ts/webpack/runtime/make namespace object","webpack://impulse-ts/webpack/runtime/node module decorator","webpack://impulse-ts/webpack/runtime/publicPath","webpack://impulse-ts/./src/typescript/math/matrix.tsx","webpack://impulse-ts/./src/typescript/network.tsx","webpack://impulse-ts/./src/typescript/builder/builder1d.tsx","webpack://impulse-ts/./src/typescript/builder/abstract.tsx","webpack://impulse-ts/./src/typescript/types.tsx","webpack://impulse-ts/./src/typescript/layer/abstract.tsx","webpack://impulse-ts/./src/typescript/layer/abstract1d.tsx","webpack://impulse-ts/./src/typescript/layer/softmax.tsx","webpack://impulse-ts/./src/typescript/layer/logistic.tsx"],"sourcesContent":["\ntry {\n  process.dlopen(module, __dirname + require(\"path\").sep + __webpack_public_path__ + \"930b6ec700b021a0f3b792de5ba180d5.node\");\n} catch (error) {\n  throw new Error('node-loader:\\n' + error);\n}\n","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","import {\n  MatrixMultiply,\n  MatrixElementWiseAdd,\n  MatrixElementWiseSubtract,\n  MatrixElementWiseMultiply,\n  MatrixElementWiseDivide,\n  MatrixSum,\n  MatrixFillRandom,\n} from \"impulseTsToolkit\";\n\nexport class Matrix {\n  public rows = 0;\n  public cols = 0;\n  public data = null;\n\n  constructor(rows = 0, cols = 0) {\n    this.resize(rows, cols);\n  }\n\n  resize(rows, cols) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = new Array(rows * cols);\n  }\n\n  forEach(callback: Function) {\n    for (let i = 0; i < this.rows * this.cols; i++) {\n      const newValue = callback(this.data[i]);\n      this.data[i] = newValue !== undefined ? newValue : this.data[i];\n    }\n    return this;\n  }\n}\n\nexport const multiply = (m1: Matrix, m2: Matrix): Matrix => {\n  if (m1.cols !== m2.rows) {\n    throw new Error(\"DIMENSIONS error.\");\n  }\n\n  const result = new Matrix(m1.rows, m2.cols);\n  result.data = MatrixMultiply(\n    m1.data,\n    m1.rows,\n    m1.cols,\n    m2.data,\n    m2.rows,\n    m2.cols\n  );\n\n  return result;\n};\n\nexport const add = (m1: Matrix, m2: Matrix): Matrix => {\n  if (m1.rows !== m2.rows) {\n    throw new Error(\"ROWS number not equal.\");\n  }\n  if (m1.cols !== m2.cols) {\n    throw new Error(\"COLS number not equal.\");\n  }\n\n  const result = new Matrix(m1.rows, m2.cols);\n  result.data = MatrixElementWiseAdd(\n    m1.data,\n    m1.rows,\n    m1.cols,\n    m2.data,\n    m2.rows,\n    m2.cols\n  );\n\n  return result;\n};\n\nexport const subtract = (m1: Matrix, m2: Matrix) => {\n  if (m1.rows !== m2.rows) {\n    throw new Error(\"ROWS number not equal.\");\n  }\n  if (m1.cols !== m2.cols) {\n    throw new Error(\"COLS number not equal.\");\n  }\n\n  const result = new Matrix(m1.rows, m2.cols);\n  result.data = MatrixElementWiseSubtract(\n    m1.data,\n    m1.rows,\n    m1.cols,\n    m2.data,\n    m2.rows,\n    m2.cols\n  );\n\n  return result;\n};\n\nexport const resize = (m1: Matrix, rows: number, cols: number): void => {\n  m1.resize(rows, cols);\n};\n\nexport const fillRandom = (m1: Matrix, i: number): void => {\n  return MatrixFillRandom(m1.data, m1.rows, m1.cols, i);\n};\n\nexport const forEach = (\n  m1: Matrix,\n  callback: (x: number) => number\n): Matrix => {\n  return m1.forEach(callback);\n};\n\nexport const elementWiseMultiply = (m1: Matrix, m2: Matrix): Matrix => {\n  if (m1.rows !== m2.rows) {\n    throw new Error(\"ROWS number not equal.\");\n  }\n  if (m1.cols !== m2.cols) {\n    throw new Error(\"COLS number not equal.\");\n  }\n\n  const result = new Matrix(m1.rows, m1.cols);\n  result.data = MatrixElementWiseMultiply(\n    m1.data,\n    m1.rows,\n    m1.cols,\n    m2.data,\n    m2.rows,\n    m2.cols\n  );\n\n  return result;\n};\n\nexport const sum = (m: Matrix): number => {\n  return MatrixSum(m.data, m.rows, m.cols);\n};\n\nexport const cols = (m: Matrix): number => {\n  return m.cols;\n};\n\nexport const colwise = (\n  m: Matrix,\n  callback: (colVector: Matrix) => number\n): Matrix => {\n  const result = new Matrix(1, m.cols);\n  for (let col = 0; col < m.cols; col++) {\n    const rowMatrix = new Matrix(m.rows, 1);\n    for (let row = 0; row < m.rows; row++) {\n      rowMatrix.data[row] = m.data[row * m.cols + col];\n    }\n    result.data[col] = callback(rowMatrix);\n  }\n  return result;\n};\n\nexport const elementWiseDivide = (m1: Matrix, m2: Matrix) => {\n  if (m1.rows !== m2.rows) {\n    throw new Error(\"ROWS number not equal.\");\n  }\n  if (m1.cols !== m2.cols) {\n    throw new Error(\"COLS number not equal.\");\n  }\n\n  const result = new Matrix(m1.rows, m1.cols);\n  result.data = MatrixElementWiseDivide(\n    m1.data,\n    m1.rows,\n    m1.cols,\n    m2.data,\n    m2.rows,\n    m2.cols\n  );\n\n  return result;\n};\n\nexport const replicateRows = (m: Matrix, numRows: number) => {\n  const result = new Matrix(numRows, m.cols);\n  for (let row = 0; row < result.rows; row++) {\n    for (let col = 0; col < result.cols; col++) {\n      const index = row * result.cols + col;\n      result.data[index] = m.data[col];\n    }\n  }\n  return result;\n};\n","import { Dimension, Layers } from \"./types\";\nimport { cols, Matrix, subtract } from \"./math/matrix\";\n\nclass Network {\n  private dimensions: Dimension = null;\n  private size: number = 0;\n  private layers: Layers[] = [];\n\n  constructor(dimensions: Dimension) {\n    this.dimensions = dimensions;\n  }\n\n  addLayer(layer: Layers) {\n    this.size++;\n    this.layers.push(layer);\n  }\n\n  forward(input: Matrix): Matrix {\n    let output = input;\n\n    this.layers.forEach((layer: Layers) => {\n      output = layer.forward(output);\n    });\n\n    return output;\n  }\n\n  backward(X: Matrix, Y: Matrix, predictions: Matrix, regularization: number) {\n    const m = cols(X);\n\n    let delta = subtract(predictions, Y);\n\n    this.layers.reverse().forEach((layer) => {\n      // delta = layer.backpropagation.propagate(X, m, regularization, delta)\n    });\n  }\n}\n\nexport { Network };\nexport default Network;\n","import { AbstractBuilder } from \"./abstract\";\nimport { Layers } from \"../types\";\n\nclass Builder1D extends AbstractBuilder {\n  firstLayerTransition(layer: Layers) {\n    layer.setWidth(this.dimensions[0]);\n  }\n}\n\nexport { Builder1D };\nexport default Builder1D;\n","import { Dimension, Layers } from \"../types\";\nimport Network from \"../network\";\n\nabstract class AbstractBuilder {\n  protected dimensions: Dimension = null;\n  protected previousLayer: Layers = null;\n  protected network: Network = null;\n\n  constructor(dimension: Dimension) {\n    this.dimensions = dimension;\n    this.network = new Network(dimension);\n  }\n\n  createLayer(type: Layers, callback: Function) {\n    const layer = new type();\n\n    if (typeof callback === \"function\") {\n      callback(layer);\n    }\n\n    if (this.previousLayer === null) {\n      this.firstLayerTransition(layer);\n    } else {\n      layer.transition(this.previousLayer);\n    }\n\n    layer.configure();\n\n    this.network.addLayer(layer);\n    this.previousLayer = layer;\n  }\n\n  getNetwork(): Network {\n    return this.network;\n  }\n\n  abstract firstLayerTransition(layer: Layers);\n}\n\nexport { AbstractBuilder };\nexport default AbstractBuilder;\n","import { SoftmaxLayer, LogisticLayer } from \"./layer\";\n\nexport type Dimension = [number] | [number, number, number];\n\nexport enum LayerType {\n  logistic,\n  softmax,\n}\n\nexport type Layers = LogisticLayer | SoftmaxLayer;\nexport type Layers1D = LogisticLayer | SoftmaxLayer;\nexport type Layers2D = null;\n","import { add, Matrix, multiply } from \"../math/matrix\";\nimport { Dimension, Layers } from \"../types\";\n\nabstract class AbstractLayer {\n  public W: Matrix;\n  public b: Matrix;\n  public A: Matrix;\n  public Z: Matrix;\n  public gW: Matrix;\n  public gb: Matrix;\n\n  protected width: number = 0;\n  protected height: number = 0;\n  protected depth: number = 0;\n  protected previousLayer: Layers = null;\n\n  constructor() {\n    this.W = new Matrix();\n    this.b = new Matrix();\n    this.A = new Matrix();\n    this.Z = new Matrix();\n    this.gW = new Matrix();\n    this.gb = new Matrix();\n  }\n\n  forward(input: Matrix): Matrix {\n    this.Z = add(multiply(this.W, input), this.b);\n    this.A = this.activation(this.Z);\n    return this.A;\n  }\n\n  setWidth(value: number) {\n    this.width = value;\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  setHeight(value: number) {\n    this.height = value;\n  }\n\n  getHeight(): number {\n    return this.height;\n  }\n\n  setDepth(value: number) {\n    this.depth = value;\n  }\n\n  getDepth(): number {\n    return this.depth;\n  }\n\n  abstract getOutputWidth();\n\n  abstract getOutputHeight();\n\n  abstract getOutputDepth();\n\n  abstract configure();\n\n  abstract is1D(): boolean;\n\n  abstract is3D(): boolean;\n\n  abstract transition(previousLayer: Layers);\n\n  abstract setSize(dimension: Dimension);\n\n  abstract getSize();\n\n  abstract activation(value: Matrix): Matrix;\n\n  abstract derivative(value: Matrix): Matrix;\n\n  abstract getType();\n\n  abstract loss(output: Matrix, predictions: Matrix): number;\n\n  abstract error(m: number): number;\n}\n\nexport { AbstractLayer };\n","import { AbstractLayer } from \"./abstract\";\nimport { fillRandom, resize } from \"../math/matrix\";\nimport { Dimension, Layers } from \"../types\";\n\nabstract class AbstractLayer1D extends AbstractLayer {\n  protected depth: number = 1;\n\n  configure() {\n    resize(this.W, this.height, this.width);\n    fillRandom(this.W, this.width);\n\n    resize(this.b, this.height, 1);\n    fillRandom(this.b, this.width);\n\n    resize(this.gW, this.height, this.width);\n    resize(this.gb, this.height, 1);\n  }\n\n  is1D(): boolean {\n    return true;\n  }\n\n  is3D(): boolean {\n    return false;\n  }\n\n  transition(previousLayer: Layers) {\n    if (previousLayer.is1D()) {\n      this.setWidth(previousLayer.getSize());\n    } else if (previousLayer.is3D()) {\n      this.setWidth(\n        previousLayer.getOutputWidth() *\n          previousLayer.getOutputHeight() *\n          previousLayer.getOutputDepth()\n      );\n    }\n  }\n\n  setSize(value: Dimension) {\n    this.setHeight(value[0]);\n  }\n\n  getSize(): number {\n    return this.height;\n  }\n\n  getOutputWidth() {\n    return this.width;\n  }\n\n  getOutputHeight() {\n    return this.height;\n  }\n\n  getOutputDepth() {\n    return 1;\n  }\n}\n\nexport { AbstractLayer1D };\n","import {\n  colwise,\n  elementWiseDivide,\n  forEach,\n  Matrix,\n  replicateRows,\n  subtract,\n  sum,\n} from \"../math/matrix\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./abstract1d\";\n\nclass SoftmaxLayer extends AbstractLayer1D {\n  activation(m: Matrix): Matrix {\n    const t = m.forEach((x) => Math.exp(x));\n    const divider = replicateRows(\n      colwise(t, (colVector) => {\n        return sum(colVector);\n      }),\n      t.rows\n    );\n    return elementWiseDivide(t, divider);\n  }\n\n  derivative(): Matrix {\n    throw new Error(\"Unsupported usage.\");\n  }\n\n  getType(): LayerType {\n    return LayerType.softmax;\n  }\n\n  loss(output: Matrix, predictions: Matrix): number {\n    const loss = subtract(\n      output,\n      forEach(predictions, (x) => Math.log(x))\n    );\n    return sum(loss);\n  }\n\n  error(m: number): number {\n    return -1.0 / m;\n  }\n}\n\nexport { SoftmaxLayer };\n","import { add, elementWiseMultiply, forEach, Matrix, sum } from \"../math/matrix\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./abstract1d\";\n\nclass LogisticLayer extends AbstractLayer1D {\n  activation(m: Matrix): Matrix {\n    return forEach(m, (x) => {\n      return 1.0 / (1.0 + Math.exp(-x));\n    });\n  }\n\n  derivative(): Matrix {\n    return elementWiseMultiply(\n      this.A,\n      forEach(this.A, (x) => {\n        return 1.0 - x;\n      })\n    );\n  }\n\n  getType(): LayerType {\n    return LayerType.logistic;\n  }\n\n  loss(output: Matrix, predictions: Matrix): number {\n    const loss: Matrix = add(\n      elementWiseMultiply(\n        output,\n        forEach(predictions, (x) => {\n          return Math.log(x);\n        })\n      ),\n      elementWiseMultiply(\n        forEach(output, (x) => {\n          return 1.0 - x;\n        }),\n        forEach(predictions, (x) => {\n          return Math.log(1.0 - x);\n        })\n      )\n    );\n\n    return sum(loss);\n  }\n\n  error(m: number): number {\n    return -1.0 / m;\n  }\n}\n\nexport { LogisticLayer };\n"],"names":["process","dlopen","module","__dirname","error","Error","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","id","loaded","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nmd","paths","children","p","Matrix","rows","cols","this","resize","data","Array","callback","i","newValue","multiply","m1","m2","result","MatrixMultiply","add","MatrixElementWiseAdd","subtract","MatrixElementWiseSubtract","fillRandom","MatrixFillRandom","forEach","elementWiseMultiply","MatrixElementWiseMultiply","sum","m","MatrixSum","Network","dimensions","layer","size","layers","push","input","output","forward","X","Y","predictions","regularization","reverse","Builder1D","setWidth","AbstractBuilder","dimension","network","type","previousLayer","firstLayerTransition","transition","configure","addLayer","LayerType","AbstractLayer","W","b","A","Z","gW","gb","activation","width","height","depth","AbstractLayer1D","is1D","getSize","is3D","getOutputWidth","getOutputHeight","getOutputDepth","setHeight","SoftmaxLayer","t","x","Math","exp","MatrixElementWiseDivide","elementWiseDivide","numRows","row","col","index","replicateRows","rowMatrix","colwise","softmax","loss","log","LogisticLayer","logistic"],"sourceRoot":""}